!function(){"use strict";function l(a){a.preventDefault(),auth2.grantOfflineAccess().then(m)}function m(a){a.code?$.ajax({method:"POST",url:"/login/google/",headers:{"X-Requested-With":"XMLHttpRequest"},contentType:"application/octet-stream; charset=utf-8",success:function(a){console.log(a),window.location="/"},processData:!1,data:a.code}):console.log("authResult error: "+a.error)}function n(a){a.preventDefault(),$.post($(a.target).attr("href")).done(function(a){console.log(a),window.location="/"}).fail(function(a){console.log("CSRF Token not valid")})}function o(b){var c="false"==f.attr("aria-expanded"),d="false"==e.attr("aria-hidden");f.attr("aria-expanded",c),e.attr("aria-hidden",d),g.toggleClass("is-visible"),e.toggleClass("is-visible"),a.toggleClass("has-nav-drawer")}function p(a){a.preventDefault(),$.post($(a.target).closest("a").attr("href")).done(function(a){console.log(a),window.location="/"}).fail(function(a){console.log("CSRF Token not valid"),console.log(a.status)})}function q(a){a.preventDefault(),$.post($(a.target).attr("href")).done(function(b){$(a.target).closest(".mdl-card").remove(),console.log(b)}).fail(function(a){console.log(a.status)})}function r(){var b="false"==j.attr("aria-hidden");j.attr("aria-hidden",b),j.toggleClass("is-visible"),a.toggleClass("has-modal"),j.focus()}function s(a){var b=27;a.which==b&&(a.preventDefault(),r())}function t(){var a=window.location.hash;return!!a&&a}var a=$("body"),b=$(".login"),c=$("#g-signin"),d=$(".logout"),e=$(".nav-drawer"),f=$(".drawer-button"),g=$(".obfuscator"),h=$(".item-delete-button"),i=$(".photo-delete-button"),j=$(".login-modal"),k=$(".login-modal__cancel-button");b.click(r),c.click(l),d.click(n),f.click(o),g.click(o),h.click(p),i.click(q),k.click(r),j.keydown(s),$(window).resize(function(){var b=$(window).width(),c=576;b>c&&a.hasClass("has-nav-drawer")&&o()}),$.ajaxSetup({beforeSend:function(a,b){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(b.type)||this.crossDomain||a.setRequestHeader("X-CSRFToken",$(".csrf-token").text())}}),"#login"==t()&&r()}();
